<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8" />
<meta name="generator" content="Hugo 0.123.6">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="toTop" content="true">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="author" content="å­èˆ’" />
<meta property="og:url" content="https://zishu.me/tags/webpack/" />
<link rel="canonical" href="https://zishu.me/tags/webpack/" /><link rel="apple-touch-icon" href="https://imgurl.zishu.me/favicon.ico" />
<link rel="icon" href="https://imgurl.zishu.me/favicon.ico" />
<link rel="shortcut" href="https://imgurl.zishu.me/favicon.ico" /><link rel="alternate" type="application/atom+xml" href="https://zishu.me/index.xml" title="å­èˆ’çš„åšå®¢">
<script type="application/ld+json">
{
"@context" : "http://schema.org",
"@type" : "BlogPosting",
"mainEntityOfPage": {
"@type": "WebPage",
"@id": "https:\/\/zishu.me\/"
},
"articleSection" : "tags",
"name" : "Webpack",
"headline" : "Webpack",
"description" : "",
"inLanguage" : "en-US",
"author" : "å­èˆ’",
"creator" : "å­èˆ’",
"publisher": "å­èˆ’",
"accountablePerson" : "å­èˆ’",
"copyrightHolder" : "å­èˆ’",
"copyrightYear" : "2021",
"datePublished": "2021-01-18 00:00:00 \u002b0000 UTC",
"dateModified" : "2021-01-18 00:00:00 \u002b0000 UTC",
"url" : "https:\/\/zishu.me\/tags\/webpack\/",
"keywords" : [  ]
}
</script><title>Webpack - å­èˆ’çš„åšå®¢</title>
<meta property="og:title" content="Webpack" />
<meta property="og:type" content="article" />
<meta property="og:description" content="" />
<meta name="description" content="" />
<meta property="og:locale" content="en-us" /><meta property="og:image" content="https://imgurl.zishu.me/favicon.ico" />


<link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/css/index.css">
<link href="/index.xml" rel="alternate" type="application/rss+xml" title="å­èˆ’çš„åšå®¢">
<script src="/js/jquery3.6.0.min.js"></script>
</head>

<body id="container">
  <meter id="isread" max="100" value="0"></meter>
<script>
  window.addEventListener('scroll', function () {
    var scrolled = window.scrollY;
    var totalHeight = document.documentElement.scrollHeight - window.innerHeight;
    var percentage = (scrolled / totalHeight) * 100;
    $('#isread').attr('value', percentage)
  });
</script>


<div id="head" class="site-index">
  <a id="logo" href="/">
    <img src="https://imgurl.zishu.me/author.webp">
  </a>
  <div id="site-title">
    <a href="/">å­èˆ’çš„åšå®¢</a>
  </div>
  <ul id="menu">
    
    <li><a href="/categories/%e6%8a%80%e6%9c%af/">æŠ€æœ¯</a></li>
    
    <li><a href="/categories/%e9%9a%8f%e7%ac%94/">éšç¬”</a></li>
    
    <li><a href="/categories/weekly/">å‘¨åˆŠ</a></li>
    
    <li><a href="/message/">ç•™è¨€</a></li>
    
    <li><a href="/about/">å…³äº</a></li>
    
    <li><a href="/index.xml" target="_blank">è®¢é˜…</a></li>
  </ul>
</div>

  <section id="body">
    <h1 id="body-title">ğŸ““ Webpack</h1>

    <div id="body-in">
      <h3 class="posts-year" id="2021">2021</h3>
      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/47.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/47.html/">
            <h2>webpack çš„æ ¸å¿ƒæ¦‚å¿µå’Œæ„å»ºæµç¨‹</h2>
          </a>
          <div class="text">1.webpack çš„æ ¸å¿ƒæ¦‚å¿µ entryï¼ˆå…¥å£ï¼‰ï¼šä¸€ä¸ªå¯æ‰§è¡Œæ¨¡å—æˆ–è€…åº“çš„å…¥å£ã€‚å®šä¹‰äº†æ‰“åŒ…åçš„å…¥å£æ–‡ä»¶ã€‚ outputï¼ˆå‡ºå£ï¼‰ï¼šæŒ‡ç¤º webpack å¦‚ä½•å»è¾“å‡ºï¼Œä»¥åŠåœ¨å“ªé‡Œè¾“å‡ºã€‚ path: æ‰“åŒ…æ–‡ä»¶å­˜æ”¾çš„ç»å¯¹è·¯å¾„ publicPath: ç½‘ç«™è¿è¡Œæ—¶çš„è®¿é—®è·¯å¾„ filename: æ‰“åŒ…åçš„æ–‡ä»¶å moduleï¼ˆæ¨¡å—ï¼‰ï¼šåœ¨ webpack é‡Œï¼Œä¸€åˆ‡çš†æ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªæ–‡ä»¶ã€‚webpack ä¼šä»é…ç½®çš„ entry ä¸­å¼€å§‹é€’å½’æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—ã€‚ chunkï¼ˆä»£ç å—ï¼‰ï¼šä¸€ä¸ª chunk ç”±å¤šä¸ª æ¨¡å— ç»„åˆè€Œæˆã€‚å¯ä»¥å°†å¯æ‰§è¡Œçš„æ¨¡å—å’Œä»–æ‰€ä¾èµ–çš„æ¨¡å—ç»„åˆæˆä¸€ä¸ª chunkï¼Œè¿™å°±æ˜¯æ‰“åŒ…ã€‚ loaderï¼ˆæ¨¡å—è½¬æ¢å™¨ï¼‰ï¼šç”¨äºæŠŠä¸€ä¸ªæ¨¡å—åŸå†…å®¹æŒ‰ç…§éœ€æ±‚è½¬æ¢æˆæ–°çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼šes6 è½¬æ¢ä¸º es5ï¼Œscss è½¬æ¢ä¸º css ç­‰ã€‚ pluginï¼ˆæ‰©å±•ï¼‰ï¼šæ‰©å±• webpack åŠŸèƒ½çš„æ’ä»¶ã€‚åœ¨ webpack æ„å»ºçš„ç”Ÿå‘½å‘¨æœŸèŠ‚ç‚¹ä¸ŠåŠ å…¥æ‰©å±• hookï¼Œæ·»åŠ åŠŸèƒ½ã€‚ 2.webpack æ„å»ºæµç¨‹ åˆå§‹åŒ–å‚æ•°ï¼šè§£æ webpack çš„é…ç½®å‚æ•°ï¼Œåˆå¹¶ shell ä¼ å…¥å’Œ webpack.config.js æ–‡ä»¶é…ç½®çš„å‚æ•°ï¼Œå½¢æˆæœ€åçš„é…ç½®ç»“æœã€‚ å¼€å§‹ç¼–è¯‘ï¼šä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– compiler å¯¹è±¡ï¼Œæ³¨å†Œæ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ’ä»¶ç›‘å¬ webpack æ„å»ºç”Ÿå‘½å‘¨æœŸçš„äº‹ä»¶èŠ‚ç‚¹ï¼Œåšå‡ºç›¸åº”çš„ååº”ï¼Œæ‰§è¡Œå¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘ã€‚ ç¡®å®šå…¥å£ï¼šå…¶é…ç½®çš„ entry å…¥å£ï¼Œå¼€å§‹è§£ææ–‡ä»¶æ„å»ºçš„ AST è¯­æ³•æ ‘ï¼Œæ‰¾å‡ºä¾èµ–ï¼Œé€’å½’ä¸‹å»ã€‚ ç¼–è¯‘æ¨¡å—ï¼šæ ¹æ®æ–‡ä»¶ç±»å‹å’Œ loader é…ç½®ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ loader å¯¹æ–‡ä»¶è¿›è¡Œè½¬æ¢ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤çŸ¥é“æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†ã€‚ å®Œæˆæ¨¡å—ç¼–è¯‘å¹¶è¾“å‡ºï¼šé€’å½’å®Œåï¼Œå¾—åˆ°æ¯ä¸ªæ–‡ä»¶ç»“æœï¼ŒåŒ…å«äº†æ¯ä¸ªæ¨¡å—åŠå¥¹ä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ ¹æ® entry é…ç½®ç”Ÿæˆä»£ç å— chunkã€‚ è¾“å‡ºå®Œæˆï¼šè¾“å‡ºæ‰€æœ‰çš„ chunk åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚ 3.æœ‰å“ªäº›å¸¸è§çš„ loaderï¼Ÿ babel-loaderï¼šæŠŠ es6 è½¬æˆ es5ï¼› css-loaderï¼šåŠ è½½ cssï¼Œæ”¯æŒæ¨¡å—åŒ–ï¼Œå‹ç¼©ï¼Œæ–‡ä»¶å¯¼å…¥ç­‰ç‰¹æ€§ï¼› style-loaderï¼šæŠŠ css ä»£ç æ³¨å…¥åˆ° js ä¸­ï¼Œé€šè¿‡ dom æ“ä½œå»åŠ è½½ cssï¼› eslint-loaderï¼šé€šè¿‡ Eslint æ£€æŸ¥ js ä»£ç ï¼› image-loaderï¼šåŠ è½½å¹¶ä¸”å‹ç¼©å›¾ç‰‡æ™šé—´ï¼› file-loaderï¼šæ–‡ä»¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹ url å»å¼•ç”¨è¾“å‡ºçš„æ–‡ä»¶ï¼› url-loaderï¼šå’Œ file-loader ç±»ä¼¼ï¼Œæ–‡ä»¶å¾ˆå°çš„æ—¶å€™å¯ä»¥ base64 æ–¹å¼å§æ–‡ä»¶å†…å®¹æ³¨å…¥åˆ°ä»£ç ä¸­ã€‚ source-map-loaderï¼šåŠ è½½é¢å¤–çš„ source map æ–‡ä»¶ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚ 4.ä¸šåŠ¡åœºæ™¯å’Œå¯¹åº”è§£å†³æ–¹æ¡ˆ 1.å•é¡µåº”ç”¨ ä¸€ä¸ªå•é¡µåº”ç”¨éœ€è¦é…ç½®ä¸€ä¸ª entry æŒ‡æ˜æ‰§è¡Œå…¥å£ï¼Œweb-webpack-plugin é‡Œçš„ WebPlugin å¯ä»¥è‡ªåŠ¨çš„å®Œæˆè¿™äº›å·¥ä½œï¼šwebpack ä¼šä¸º entry ç”Ÿæˆä¸€ä¸ªåŒ…å«è¿™ä¸ªå…¥å£çš„æ‰€æœ‰ä¾èµ–æ–‡ä»¶çš„ chunkï¼Œä½†æ˜¯è¿˜éœ€è¦ä¸€ä¸ª html æ¥åŠ è½½ chunk ç”Ÿæˆçš„ jsï¼Œå¦‚æœè¿˜æå–å‡º css éœ€è¦ HTML æ–‡ä»¶ä¸­å¼•å…¥æå–çš„ cssã€‚ ä¸€ä¸ªç®€å•çš„ webpack é…ç½®æ–‡ä»¶ä¾‹å­ï¼š const { WebPlugin } = require(&#39;web-webpack-plugin&#39;); module.exports = { entry: { app: &#39;./src/doc/index.js&#39;, home: &#39;./src/doc/home.js&#39; }, plugins: [ // ä¸€ä¸ª WebPlugin å¯¹åº”ç”Ÿæˆä¸€ä¸ª html æ–‡ä»¶ new WebPlugin({ //è¾“å‡ºçš„ html æ–‡ä»¶åç§° filename: &#39;index.html&#39;, //è¿™ä¸ª html ä¾èµ–çš„`entry` requires: [&#39;app&#39;,&#39;home&#39;], }), ], }; è¯´æ˜ï¼šrequire: [&lsquo;app&rsquo;, &lsquo;home&rsquo;]æŒ‡æ˜è¿™ä¸ª html ä¾èµ–å“ªäº› entryï¼Œentry ç”Ÿæˆçš„ js å’Œ css ä¼šè‡ªåŠ¨æ³¨å…¥åˆ° html ä¸­ã€‚ è¿˜æ”¯æŒé…ç½®è¿™äº›èµ„æºæ³¨å…¥æ–¹å¼ï¼Œæ”¯æŒå¦‚ä¸‹å±æ€§ï¼š _dist åªæœ‰åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ‰å¼•å…¥çš„èµ„æºï¼› _dev åªæœ‰åœ¨å¼€å‘ç¯å¢ƒä¸­æ‰å¼•å…¥çš„èµ„æºï¼› _inline æŠŠèµ„æºçš„å†…å®¹æ½œå…¥åˆ° html ä¸­ï¼› _ie åªæœ‰ IE æµè§ˆå™¨æ‰éœ€è¦å¼•å…¥çš„èµ„æºã€‚ è¿™äº›å±æ€§å¯ä»¥é€šè¿‡åœ¨ js é‡Œé…ç½®ï¼Œçœ‹ä¸ªç®€å•ä¾‹å­ï¼š new WebPlugin({ filename: &#39;index.html&#39;, requires: { app:{ _dist:true, _inline:false, } }, }), è¿™äº›å±æ€§è¿˜å¯ä»¥åœ¨æ¨¡æ¿ä¸­è®¾ç½®ï¼Œä½¿ç”¨æ¨¡æ¿å¥½å¤„å°±æ˜¯å¯ä»¥çµæ´»çš„æ§åˆ¶èµ„æºçš„æ³¨å…¥ç‚¹ new WebPlugin({ filename: &#39;index.html&#39;, template: &#39;./template.html&#39;, }), &lt;!DOCTYPE html&gt; &lt;html lang=&#34;zh-cn&#34;&gt; &lt;head&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;app?_inline&#34;&gt; &lt;script src=&#34;ie-polyfill?_ie&#34;&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&#34;react-body&#34;&gt;&lt;/div&gt; &lt;script src=&#34;app&#34;&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt; WebPlugin æ’ä»¶å€Ÿé‰´äº† fis3 çš„æ€æƒ³ï¼Œè¡¥è¶³äº† webpack ç¼ºå¤±çš„ä»¥ HTML ä¸ºå…¥å£çš„åŠŸèƒ½ã€‚æƒ³äº†è§£ WebPlugin çš„æ›´å¤šåŠŸèƒ½ï¼Œè§æ–‡æ¡£ã€‚ 2.ä¸€ä¸ªé¡¹ç›®ç®¡ç†å¤šä¸ªå•é¡µé¢ ä¸€ä¸ªé¡¹ç›®ä¸­ä¼šåŒ…å«å¤šä¸ªå•é¡µåº”ç”¨ï¼Œè™½ç„¶å¤šä¸ªå•é¡µé¢åº”ç”¨å¯ä»¥åˆæˆä¸€ä¸ªï¼Œä½†æ˜¯è¿™æ ·åšä¼šå¯¼è‡´ç”¨æˆ·æ²¡æœ‰è®¿é—®çš„éƒ¨åˆ†ä¹ŸåŠ è½½äº†ï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰å¾ˆå¤šçš„å•é¡µåº”ç”¨ã€‚ä¸ºæ¯ä¸€ä¸ªå•é¡µåº”ç”¨é…ç½®ä¸€ä¸ª entry å’Œ WebPluginï¼Ÿå¦‚æœåˆæ–°å¢ï¼Œåˆè¦æ–°å¢ webpack é…ç½®ï¼Œè¿™æ ·åšéº»çƒ¦ï¼Œè¿™æ—¶å€™æœ‰ä¸€ä¸ªæ’ä»¶ web-webpack-plugin é‡Œçš„ AutoWebPlugin æ–¹æ³•å¯ä»¥è§£å†³è¿™äº›é—®é¢˜ã€‚ module.exports = { plugins: [ // æ‰€æœ‰é¡µé¢çš„å…¥å£ç›®å½• new AutoWebPlugin(&#39;./src/&#39;), ] }; åˆ†æï¼š AutoWebPluginä¼šæŠŠ./src/ç›®å½•ä¸‹æ‰€æœ‰æ¯ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºä¸€ä¸ªå•é¡µé¡µé¢çš„å…¥å£ï¼Œè‡ªåŠ¨ä¸ºæ‰€æœ‰çš„é¡µé¢å…¥å£é…ç½®ä¸€ä¸ª WebPlugin è¾“å‡ºå¯¹åº”çš„ htmlã€‚ è¦æ–°å¢ä¸€ä¸ªé¡µé¢å°±åœ¨ ./src/ ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åŒ…å«è¿™ä¸ªå•é¡µåº”ç”¨æ‰€ä¾èµ–çš„ä»£ç ï¼ŒAutoWebPlugin è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåå«æ–‡ä»¶å¤¹åç§°çš„ html æ–‡ä»¶ã€‚ 3.ä»£ç åˆ†éš”ä¼˜åŒ– ä¸€ä¸ªå¥½çš„ä»£ç åˆ†å‰²å¯¹æµè§ˆå™¨é¦–å±æ•ˆæœæå‡å¾ˆå¤§ã€‚ æœ€å¸¸è§çš„ react ä½“ç³»ï¼š å…ˆæŠ½å‡ºåŸºç¡€åº“ react react-dom redux react-redux åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶è€Œä¸æ˜¯å’Œå…¶å®ƒæ–‡ä»¶æ”¾åœ¨ä¸€èµ·æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯åªè¦ä½ ä¸å‡çº§ä»–ä»¬çš„ç‰ˆæœ¬è¿™ä¸ªæ–‡ä»¶æ°¸è¿œä¸ä¼šè¢«åˆ·æ–°ã€‚å¦‚æœä½ æŠŠè¿™äº›åŸºç¡€åº“å’Œä¸šåŠ¡ä»£ç æ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œæ¯æ¬¡æ”¹åŠ¨ä¸šåŠ¡ä»£ç éƒ½ä¼šå¯¼è‡´æ–‡ä»¶ hash å€¼å˜åŒ–ä»è€Œå¯¼è‡´ç¼“å­˜å¤±æ•ˆæµè§ˆå™¨é‡å¤ä¸‹è½½è¿™äº›åŒ…å«åŸºç¡€åº“çš„ä»£ç ã€‚æ‰€ä»¥æŠŠåŸºç¡€åº“æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ã€‚ // vender.js æ–‡ä»¶æŠ½ç¦»åŸºç¡€åº“åˆ°å•ç‹¬çš„ä¸€ä¸ªæ–‡ä»¶é‡Œé˜²æ­¢è·Ÿéšä¸šåŠ¡ä»£ç è¢«åˆ·æ–° // æ‰€æœ‰é¡µé¢éƒ½ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“ // react åŸºç¡€ import &#39;react&#39;; import &#39;react-dom&#39;; import &#39;react-redux&#39;; // redux åŸºç¡€ import &#39;redux&#39;; import &#39;redux-thunk&#39;; // webpack é…ç½® { entry: { vendor: &#39;./path/to/vendor.js&#39;, }, } é€šè¿‡ CommonsChunkPlugin å¯ä»¥æå–å‡ºå¤šä¸ªä»£ç å—éƒ½ä¾èµ–çš„ä»£ç å½¢æˆä¸€ä¸ªå•ç‹¬çš„ chunkã€‚åœ¨åº”ç”¨æœ‰å¤šä¸ªé¡µé¢çš„åœºæ™¯ä¸‹æå–å‡ºæ‰€æœ‰é¡µé¢å…¬å…±çš„ä»£ç å‡å°‘å•ä¸ªé¡µé¢çš„ä»£ç ï¼Œåœ¨ä¸åŒé¡µé¢ä¹‹é—´åˆ‡æ¢æ—¶æ‰€æœ‰é¡µé¢å…¬å…±çš„ä»£ç ä¹‹å‰è¢«åŠ è½½è¿‡è€Œä¸å¿…é‡æ–°åŠ è½½ã€‚æ‰€ä»¥é€šè¿‡ CommonsChunkPlugin å¯ä»¥æå–å‡ºå¤šä¸ªä»£ç å—éƒ½ä¾èµ–çš„ä»£ç å½¢æˆä¸€ä¸ªå•ç‹¬çš„ chunkã€‚ 4.æ„å»ºæœåŠ¡ç«¯æ¸²æŸ“ æœåŠ¡ç«¯æ¸²æŸ“çš„ä»£ç è¦è¿è¡Œåœ¨ nodejs ç¯å¢ƒï¼Œå’Œæµè§ˆå™¨ä¸åŒçš„æ˜¯ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ä»£ç éœ€è¦é‡‡ç”¨ commonjs è§„èŒƒåŒæ—¶ä¸åº”è¯¥åŒ…å«é™¤ js ä¹‹å¤–çš„æ–‡ä»¶æ¯”å¦‚ cssã€‚ webpack é…ç½®å¦‚ä¸‹ï¼š module.exports = { target: &#39;node&#39;, entry: { &#39;server_render&#39;: &#39;./src/server_render&#39;, }, output: { filename: &#39;./dist/server/[name].js&#39;, libraryTarget: &#39;commonjs2&#39;, }, module: { rules: [ { test: /\.js$/, loader: &#39;babel-loader&#39;, }, { test: /\.(scss|css|pdf)$/, loader: &#39;ignore-loader&#39;, }, ] }, }; åˆ†æä¸€ä¸‹ï¼š target: 'node' æŒ‡æ˜æ„å»ºå‡ºä»£ç è¦è¿è¡Œåœ¨ node ç¯å¢ƒä¸­ã€‚ libraryTarget: 'commonjs2' æŒ‡æ˜è¾“å‡ºçš„ä»£ç è¦æ˜¯ commonjs è§„èŒƒã€‚ {test: /\.(scss|css|pdf)$/,loader: 'ignore-loader'} æ˜¯ä¸ºäº†é˜²æ­¢ä¸èƒ½åœ¨ node é‡Œæ‰§è¡ŒæœåŠ¡ç«¯æ¸²æŸ“ä¹Ÿç”¨ä¸ä¸Šçš„æ–‡ä»¶è¢«æ‰“åŒ…è¿›å»ã€‚ 5.fis3 è¿ç§»åˆ° webpack fis3 å’Œ webpack æœ‰å¾ˆå¤šç›¸ä¼¼åœ°æ–¹ä¹Ÿæœ‰ä¸åŒçš„åœ°æ–¹ï¼Œç›¸ä¼¼åœ°æ–¹ï¼šéƒ½é‡‡ç”¨ commonjs è§„èŒƒï¼Œä¸åŒåœ°æ–¹ï¼šå¯¼å…¥ css è¿™äº›é js èµ„æºçš„æ–¹å¼ã€‚ fis3 é€šè¿‡@require &lsquo;./index.scss&rsquo;ï¼Œè€Œ webpack æ˜¯é€šè¿‡ require(&rsquo;./index.scss&rsquo;)ã€‚ å¦‚æœæƒ³æŠŠ fis3 å¹³æ»‘è¿ç§»åˆ° webpackï¼Œå¯ä»¥ä½¿ç”¨ comment-require-loaderã€‚ æ¯”å¦‚ï¼šä½ æƒ³åœ¨ webpack æ„å»ºæ˜¯ä½¿ç”¨é‡‡ç”¨äº† fis3 æ–¹å¼çš„ imui æ¨¡å— loaders:[{ test: /\.js$/, loaders: [&#39;comment-require-loader&#39;], include: [path.resolve(__dirname, &#39;node_modules/imui&#39;),] }] 5.è‡ªå®šä¹‰ webpack æ‰©å±• å¦‚æœä½ åœ¨ç¤¾åŒºæ‰¾ä¸åˆ°ä½ çš„åº”ç”¨åœºæ™¯çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£å°±éœ€è¦è‡ªå·±åŠ¨æ‰‹äº†å†™ loader æˆ–è€… plugin äº†ã€‚ åœ¨ä½ ç¼–å†™è‡ªå®šä¹‰ webpack æ‰©å±•å‰ä½ éœ€è¦æƒ³æ˜ç™½åˆ°åº•æ˜¯è¦åšä¸€ä¸ª loader è¿˜æ˜¯ plugin å‘¢ï¼Ÿå¯ä»¥è¿™æ ·åˆ¤æ–­ï¼š å¦‚æœä½ çš„æ‰©å±•æ˜¯æƒ³å¯¹ä¸€ä¸ªä¸ªå•ç‹¬çš„æ–‡ä»¶è¿›è¡Œè½¬æ¢é‚£ä¹ˆå°±ç¼–å†™ loader å‰©ä¸‹çš„éƒ½æ˜¯ pluginã€‚ å…¶ä¸­å¯¹æ–‡ä»¶è¿›è¡Œè½¬æ¢å¯ä»¥æ˜¯åƒï¼š babel-loader æŠŠ es6 è½¬ä¸º es5ï¼› file-loader æŠŠæ–‡ä»¶æ›¿æ¢æˆå¯¹åº”çš„ urlï¼› raw-loader æ³¨å…¥æ–‡æœ¬æ–‡ä»¶å†…å®¹åˆ°ä»£ç ä¸­ã€‚ 1.ç¼–å†™ webpack loader ç¼–å†™ loader éå¸¸ç®€å•ï¼Œä»¥ comment-require-loader ä¸ºä¾‹ï¼š module.exports = function (content) { return replace(content); }; loader çš„å…¥å£éœ€è¦å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¦å¹²çš„äº‹æƒ…å°±æ˜¯è½¬æ¢ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚ å‡½æ•°æ¥æ”¶çš„å‚æ•° content æ˜¯ä¸€ä¸ªæ–‡ä»¶åœ¨è½¬æ¢å‰çš„å­—ç¬¦ä¸²å½¢å¼å†…å®¹ï¼Œéœ€è¦è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å½¢å¼å†…å®¹ä½œä¸ºè½¬æ¢åçš„ç»“æœï¼Œæ‰€æœ‰é€šè¿‡æ¨¡å—åŒ–å€’å…¥çš„æ–‡ä»¶éƒ½ä¼šç»è¿‡ loaderã€‚ä»è¿™é‡Œå¯ä»¥çœ‹å‡º loader åªèƒ½å¤„ç†ä¸€ä¸ªä¸ªå•ç‹¬çš„æ–‡ä»¶è€Œä¸èƒ½å¤„ç†ä»£ç å—ã€‚å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ 2. ç¼–å†™ webpack plugin plugin åº”ç”¨åœºæ™¯å¹¿æ³›ï¼Œæ‰€ä»¥ç¨å¾®å¤æ‚ç‚¹ã€‚ä»¥ end-webpack-plugin ä¸ºä¾‹ï¼š class EndWebpackPlugin { constructor(doneCallback, failCallback) { this.doneCallback = doneCallback; this.failCallback = failCallback; } apply(compiler) { // ç›‘å¬ webpack ç”Ÿå‘½å‘¨æœŸé‡Œçš„äº‹ä»¶ï¼Œåšç›¸åº”çš„å¤„ç† compiler.plugin(&#39;done&#39;, (stats) =&gt; { this.doneCallback(stats); }); compiler.plugin(&#39;failed&#39;, (err) =&gt; { this.failCallback(err); }); } } module.exports = EndWebpackPlugin; loader çš„å…¥å£éœ€è¦å¯¼å‡ºä¸€ä¸ª classï¼Œåœ¨ new EndWebpackPlugin() çš„æ—¶å€™é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥è¿™ä¸ªæ’ä»¶éœ€è¦çš„å‚æ•°ï¼Œåœ¨ webpack å¯åŠ¨çš„æ—¶å€™ä¼šå…ˆå®ä¾‹åŒ– pluginï¼Œå†è°ƒç”¨ plugin çš„ apply æ–¹æ³•ï¼Œæ’ä»¶åœ¨ apply å‡½æ•°é‡Œç›‘å¬ webpack ç”Ÿå‘½å‘¨æœŸé‡Œçš„äº‹ä»¶ï¼Œåšç›¸åº”çš„å¤„ç†ã€‚ webpack plugin çš„ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š compilerï¼šä» webpack å¯åŠ¨åˆ°é€€å‡ºåªå­˜åœ¨ä¸€ä¸ª Compilerï¼Œcompiler å­˜æ”¾ç€ webpack çš„é…ç½®ã€‚ compilationï¼šç”±äº webpack çš„ç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨ç¼–è¯‘æœºåˆ¶ï¼Œcompilation ä»£è¡¨ä¸€æ¬¡ç¼–è¯‘ã€‚ Compiler å’Œ Compilation éƒ½ä¼šå¹¿æ’­ä¸€ç³»åˆ—äº‹ä»¶ã€‚webpack ç”Ÿå‘½å‘¨æœŸé‡Œæœ‰éå¸¸å¤šçš„äº‹ä»¶ã€‚ ä»¥ä¸Šåªæ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ demoï¼Œæ›´å¤æ‚çš„å¯ä»¥æŸ¥çœ‹ how to write a plugin æˆ–å‚è€ƒ web-webpack-pluginã€‚ å‚è€ƒæ–‡ç« ï¼šhttps://www.cnblogs.com/chengxs/p/11022842.html</div>
          <div class="index-post-meta">
            <a href="/blog/47.html/"> # 2021-01-18</a>
            
            
            <span class="namenode">æŠ€æœ¯</span>
            
            
          </div>
        </div>
      </div>

      
    </div>
    <div id="body-in">
      <h3 class="posts-year" id="2020">2020</h3>
      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/30.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/30.html/">
            <h2>webpack å®‰è£…é…ç½®æŒ‡ä»¤</h2>
          </a>
          <div class="text">è¿›è¡Œé‡æ–°åŠ è½½ç¼–è¯‘ã€‚å®é™…å°±æ˜¯å°†æµè§ˆå™¨ä¸è®¤è¯†çš„è¯­æ³•ç¼–è¯‘æˆæµè§ˆå™¨è®¤è¯†çš„è¯­æ³•ã€‚æ¯”å¦‚ less ç¼–è¯‘æˆ cssï¼ŒES6 è¯­æ³• è½¬æˆ ES5 ç­‰ç­‰ã€‚ å‡å°‘ io è¯·æ±‚ï¼Œé€šå¸¸æˆ‘ä»¬åœ¨è¯·æ±‚åï¼Œä¼šè¿”å›ä¸€ä¸ª html åˆ°æµè§ˆå™¨ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å¦‚æœæ‰“å¼€æ§åˆ¶å°ï¼Œå°±ä¼šå‘ç°åœ¨ html é¡µé¢é€šè¿‡ script,link ç­‰æ ‡ç­¾å¼•ç”¨çš„é™æ€èµ„æºï¼Œæµè§ˆå™¨ä¼šå†æ¬¡å‘å‡ºè¯·æ±‚å»è·å–è¿™äº›èµ„æºã€‚ä½†æ˜¯ webpack çš„æ‰“åŒ…ï¼Œå°†æ‰€æœ‰çš„é™æ€èµ„æºéƒ½åˆå¹¶å¥½äº†ï¼Œå‡å°‘äº† io è¯·æ±‚ã€‚ # å®‰è£…webpack npm install --save-dev webpack # å®‰è£…webpack-cliä¾èµ– npm install --save-dev webpack-cli # åˆ›å»ºæ–°é¡¹ç›® mkdir demo # cdé¡¹ç›® cd demo # åˆå§‹åŒ– npm init -y # å®‰è£…å¼€å‘ç‰ˆæœ¬cli npm install webpack webpack-cli --save-dev æ–°å»ºä¸€ä¸ª html æ–‡ä»¶å’Œä¸€ä¸ª js æ–‡ä»¶ï¼Œå·¥ç¨‹ç›®å½•å¦‚ä¸‹ demo |- package.json + |- index.html + |- /src + |- index.js src/index.js: function component() { var element = document.createElement(&#39;div&#39;); // Lodashï¼ˆç›®å‰é€šè¿‡ä¸€ä¸ª script è„šæœ¬å¼•å…¥ï¼‰å¯¹äºæ‰§è¡Œè¿™ä¸€è¡Œæ˜¯å¿…éœ€çš„ element.innerHTML = _.join([&#39;Hello&#39;, &#39;webpack&#39;], &#39; &#39;); return element; } document.body.appendChild(component()); index.html: &lt;!doctype html&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;èµ·æ­¥&lt;/title&gt; &lt;script src=&#34;https://unpkg.com/lodash@4.16.6&#34;&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;script src=&#34;./src/index.js&#34;&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt; åœ¨ package.json ä¸­ï¼š åˆ é™¤&quot;main&quot;: &quot;index.js&quot;,æ·»åŠ &quot;private&quot;: true è°ƒæ•´å·¥ç¨‹ç›®å½•ï¼š demo |- package.json + |- /dist + |- index.html - |- index.html |- /src |- index.js è¦åœ¨index.jsä¸­æ‰“åŒ…lodashä¾èµ–ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœ¬åœ°å®‰è£… libraryï¼Œç»ˆç«¯è¾“å…¥æŒ‡ä»¤ï¼š npm install --save lodash ç„¶åè°ƒæ•´index.jså†…å®¹ // æ·»åŠ ä¸€è¡Œä»£ç  import _ from &#39;lodash&#39;; åœ¨dist/index.htmlä¸­å¯ä»¥æŠŠå¼•å…¥çš„å¤–éƒ¨æ–‡ä»¶lodashåˆ å» åˆ å»&lt;script src=&quot;./src/index.js&quot;&gt;&lt;/script&gt; æ·»åŠ &lt;script src=&quot;main.js&quot;&gt;&lt;/script&gt; æ‰§è¡Œç»ˆç«¯ï¼š npx webpack å³å¯åœ¨distä¸­æ‰“åŒ…ç”Ÿæˆéœ€è¦çš„main.jsæ–‡ä»¶ è¿˜å¯ä»¥æ‰‹åŠ¨é…ç½®æ–‡ä»¶ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªwebpack.config.jsæ–‡ä»¶ const path = require(&#39;path&#39;); module.exports = { // è¿™é‡Œæ”¾ç€éœ€è¦æ‰“åŒ…çš„æ–‡ä»¶ï¼Œå¦‚æœå¤šä¸ªæ–‡ä»¶ï¼Œç”¨æ•°ç»„å½¢å¼å†™ entry: &#39;./src/index.js&#39;, output: { // è¿™é‡Œæ˜¯æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶åï¼Œè¿˜å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ filename: &#39;bundle.js&#39;, path: path.resolve(__dirname, &#39;dist&#39;) } }; è€ƒè™‘åˆ°ç”¨ CLI è¿™ç§æ–¹å¼æ¥è¿è¡Œæœ¬åœ°çš„ webpack ä¸æ˜¯ç‰¹åˆ«æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªå¿«æ·æ–¹å¼ï¼Œ åœ¨package.jsonä¸­çš„&quot;scripts&quot;æ–°å¢ &#34;build&#34;: &#34;webpack&#34; è¿™æ ·å°±å¯ä»¥ä½¿ç”¨npm run buildæŒ‡ä»¤ä»£æ›¿ä¹‹å‰çš„npxäº† æŠŠä¹‹å‰distæ–‡ä»¶å¤¹é‡Œé¢çš„jsæ–‡ä»¶åˆ å»ï¼Œç„¶åé‡æ–°æ‰“åŒ… npm run build çœ‹ä¸€ä¸‹å·¥ç¨‹ç›®å½• demo |- package.json |- webpack.config.js |- /dist |- bundle.js |- index.html |- /src |- index.js |- /node_modules æ²¡é—®é¢˜ï¼ŒæˆåŠŸæ‰“åŒ…ï¼Œæµè§ˆå™¨ä¹Ÿæ­£å¸¸æ˜¾ç¤º åœ¨ js æ–‡ä»¶ä¸­importäº†ä¸€ä¸ª css æ–‡ä»¶ï¼Œéœ€è¦åœ¨é…ç½®ä¸­å®‰è£…å¹¶æ·»åŠ style-loaaderå’Œcss-loader npm install --save-dev style-loader css-loader webpack.config.js: const path = require(&#39;path&#39;); module.exports = { entry: &#39;./src/index.js&#39;, output: { filename: &#39;bundle.js&#39;, path: path.resolve(__dirname, &#39;dist&#39;) }, // æ·»åŠ çš„å†…å®¹ module: { rules: [ { test: /\.css$/, use: [ &#39;style-loader&#39;, &#39;css-loader&#39; ] } ] } }; ç„¶ååœ¨ js æ¨¡å—ä¸­ï¼š import &#39;./style.css&#39; npm run buildå°±å¯ä»¥è‡ªåŠ¨è§£ææ‰“åŒ…å•¦ åŠ è½½å›¾ç‰‡ ä¸‹è½½å®‰è£…file-loader npm install --save-dev file-loader webpack.config.js: module: { rules: [ { test: /\.css$/, use: [ &#39;style-loader&#39;, &#39;css-loader&#39; ] },{ test: /\.(png|svg|jpg|gif)$/, use: [ &#39;file-loader&#39; ] } ] } åŠ è½½å­—ä½“ webpack åŠ è½½å­—ä½“èµ„æº è®°è½½æ•°æ®èµ„æº æ­¤å¤–ï¼Œå¯åŠ è½½çš„æœ‰ç”¨èµ„æºè¿˜æœ‰æ•°æ®ï¼Œjsonæ–‡ä»¶ï¼ŒCSVï¼ŒTSVï¼ŒXMLç­‰ï¼Œå®é™…ä¸Šï¼Œjsonæ˜¯å†…ç½®çš„ï¼Œå¯ä»¥ç›´æ¥import data from './data.json'å¼•å…¥ ä½†æ˜¯CSVï¼ŒTSVï¼ŒXMLä¸å¯ä»¥ï¼Œéœ€è¦é…ç½®ä¸€ä¸‹ä¾èµ– ç»ˆç«¯ä¸‹è½½å®‰è£…ï¼š npm install --save-dev csv-loader xml-loader webpack.config.js: { test: /\.(csv|tsv)$/, use: [ &#39;csv-loader&#39; ] }, { test: /\.xml$/, use: [ &#39;xml-loader&#39; ] } åœ¨srcç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª json æ–‡ä»¶data.json ç„¶ååœ¨index.jsä¸­å¼•å…¥ï¼š import data from &#39;./data.json&#39;</div>
          <div class="index-post-meta">
            <a href="/blog/30.html/"> # 2020-11-26</a>
            
            
            <span class="namenode">æŠ€æœ¯</span>
            
            
          </div>
        </div>
      </div>

      
    </div>
    
    <footer id="foot">
  <p>Â© 2020 - 2024 Powered by
    <a href="https://github.com/dlzmoe/blog" target="_blank">Github</a>
    / <a href="/index.xml" target="_blank">RSS</a>
  </p>
</footer>

<script src="/js/main.js"></script>

<script defer src="https://cn.vercount.one/js"></script>
  </section>
</body>

</html>